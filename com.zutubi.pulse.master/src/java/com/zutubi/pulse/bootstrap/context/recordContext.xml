<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans default-autowire="byName">

    <bean id="recordRoot" class="org.springframework.beans.factory.config.PropertyPathFactoryBean">
        <property name="targetBeanName">
            <value>configurationManager</value>
        </property>
        <property name="propertyPath">
            <value>userPaths.recordRoot</value>
        </property>
    </bean>

    <bean id="recordSerialiser" class="com.zutubi.tove.type.record.DefaultRecordSerialiser">
        <constructor-arg index="0">
            <ref local="recordRoot"/>
        </constructor-arg>
    </bean>
    
    <bean id="recordManager" class="com.zutubi.tove.type.record.RecordManager">
        <property name="transactionManager">
            <ref bean="pulseTransactionManager"/>
        </property>
    </bean>

    <bean id="recordStore" class="com.zutubi.tove.type.record.store.FileSystemRecordStore" init-method="initAndStartAutoCompaction" destroy-method="stopAutoCompaction">
        <property name="persistenceDirectory">
            <ref local="recordRoot"/>
        </property>
        <property name="transactionManager">
            <ref bean="pulseTransactionManager"/>
        </property>
    </bean>    
</beans>
        