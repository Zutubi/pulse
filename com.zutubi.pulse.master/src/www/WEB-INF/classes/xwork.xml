<!DOCTYPE xwork PUBLIC "-//OpenSymphony Group//XWork 1.1.1//EN"
        "http://www.opensymphony.com/xwork/xwork-1.1.1.dtd">
<xwork>
    <include file="webwork-default-package.xml"/>

    <package name="default" extends="webwork-default-package">
        <default-interceptor-ref name="completeStack"/>

        <action name="default" class="com.zutubi.pulse.master.xwork.actions.DefaultAction">
            <result name="dashboard" type="redirect">/dashboard/home/</result>
            <result name="welcome" type="velocity">/welcome.vm</result>
            <result name="browse" type="redirect">/browse/</result>
        </action>

        <action name="login" class="com.zutubi.pulse.master.xwork.actions.LoginAction">
            <result name="cancel" type="redirect">/</result>
            <result name="input" type="velocity">login.vm</result>
            <result name="success" type="velocity">login.vm</result>
        </action>

        <action name="signup" class="com.zutubi.pulse.master.xwork.actions.ActionSupport">
            <result name="input" type="velocity">signup.vm</result>
            <result name="success" type="redirect">signup.vm</result>
        </action>

        <action name="dismissWelcome" class="com.zutubi.pulse.master.xwork.actions.DismissWelcomeAction">
            <result name="success" type="redirect">/default.action</result>
        </action>

        <action name="agents" class="com.zutubi.pulse.master.xwork.actions.ActionSupport">
            <interceptor-ref name="ajaxReadOnlyStack"/>
            <result name="success" type="velocity">/agents.vm</result>
        </action>

        <action name="serverActivity" class="com.zutubi.pulse.master.xwork.actions.ActionSupport">
            <interceptor-ref name="ajaxReadOnlyStack"/>
            <result name="success" type="velocity">/server-activity.vm</result>
        </action>

        <action name="serverHistory" class="com.zutubi.pulse.master.xwork.actions.server.ServerHistoryAction">
            <interceptor-ref name="ajaxReadOnlyStack"/>
            <result name="success" type="velocity">/server-history.vm</result>
        </action>

        <action name="serverInfo" class="com.zutubi.pulse.master.xwork.actions.agents.ServerInfoAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/server-info.vm</result>
        </action>        
        
        <action name="serverMessages" class="com.zutubi.pulse.master.xwork.actions.agents.ServerMessagesAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/server-messages.vm</result>
        </action>

        <action name="agentStatus" class="com.zutubi.pulse.master.xwork.actions.agents.AgentActionBase">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/view-agent-status.vm</result>
        </action>

        <action name="agentStatistics" class="com.zutubi.pulse.master.xwork.actions.agents.AgentActionBase">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/agent-statistics.vm</result>
        </action>

        <action name="agentHistory" class="com.zutubi.pulse.master.xwork.actions.agents.AgentHistoryAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/agent-history.vm</result>
        </action>

        <action name="internalError" class="com.zutubi.pulse.master.xwork.actions.InternalErrorAction">
            <result name="success" type="velocity">/internal-error.vm</result>
            <result name="input" type="velocity">/internal-error.vm</result>
            <result name="cancel" type="velocity">/internal-error.vm</result>
        </action>

        <action name="404" class="com.zutubi.pulse.master.xwork.actions.FourOhFourAction">
            <result name="success" type="velocity">/404.vm</result>
            <result name="input" type="velocity">/404.vm</result>
            <result name="error" type="velocity">/404.vm</result>
        </action>

        <action name="browse" class="com.zutubi.pulse.master.xwork.actions.project.BrowseAction">
            <interceptor-ref name="ajaxReadOnlyStack"/>
            <result name="guest" type="redirect">/login.action</result>
            <result name="success" type="velocity">/browse.vm</result>
        </action>

        <action name="projectAction" class="com.zutubi.pulse.master.xwork.actions.project.ProjectActionAction">
            <result name="success" type="redirect">${redirect}</result>
        </action>

        <action name="viewBuildSummary" class="com.zutubi.pulse.master.xwork.actions.project.BuildStatusActionBase">
            <interceptor-ref name="ajaxReadOnlyStack"/>
            <result name="success" type="velocity">/view-build.vm</result>
        </action>

        <action name="viewChanges" class="com.zutubi.pulse.master.xwork.actions.project.ViewChangesAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/view-changes.vm</result>
            <result name="personal" type="chain">viewPersonalChanges</result>
        </action>

        <action name="viewPersonalChanges" class="com.zutubi.pulse.master.xwork.actions.project.ViewPersonalChangesAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/view-personal-changes.vm</result>
        </action>

        <action name="viewTests" class="com.zutubi.pulse.master.xwork.actions.project.BuildStatusActionBase">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/view-tests.vm</result>
        </action>

        <action name="viewTestSuite" class="com.zutubi.pulse.master.xwork.actions.project.ViewTestSuiteAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/view-test-suite.vm</result>
        </action>

        <action name="viewDetails" class="com.zutubi.pulse.master.xwork.actions.project.ViewBuildDetailsAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/view-details.vm</result>
        </action>

        <action name="viewBuildArtifacts" class="com.zutubi.pulse.master.xwork.actions.project.ViewArtifactsAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/view-artifacts.vm</result>
        </action>

        <action name="viewBuildFile" class="com.zutubi.pulse.master.xwork.actions.project.ViewBuildFileAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/view-build-file.vm</result>
        </action>

        <action name="downloadBuildFile" class="com.zutubi.pulse.master.xwork.actions.project.DownloadBuildFileAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="contentDisposition">filename="pulse.xml"</param>
            </result>
        </action>

        <action name="downloadProjectBuildFile" class="com.zutubi.pulse.master.xwork.actions.project.DownloadProjectBuildFileAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
            </result>
        </action>

        <action name="downloadDirectoryArtifact" class="com.zutubi.pulse.master.xwork.actions.project.DownloadDirectoryArtifactAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="contentDisposition">filename="${filename}"</param>
            </result>
        </action>

        <action name="tailBuildLog" class="com.zutubi.pulse.master.xwork.actions.project.TailBuildLogAction">
            <interceptor-ref name="completeStack"/>
            <result name="tail" type="velocity">/tail-build-log.vm</result>
            <result name="raw" type="stream">
                <param name="contentType">text/plain</param>
                <param name="contentDisposition">filename="build.log"</param>
            </result>
        </action>

        <action name="tailProjectLog" class="com.zutubi.pulse.master.xwork.actions.project.TailProjectLogAction">
            <interceptor-ref name="completeStack"/>
            <result name="tail" type="velocity">/tail-project-log.vm</result>
            <result name="raw" type="stream">
                <param name="contentType">text/plain</param>
                <param name="contentDisposition">filename="project.log"</param>
            </result>
        </action>

        <action name="viewChangelist" class="com.zutubi.pulse.master.xwork.actions.project.ViewChangelistAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/view-changelist.vm</result>
        </action>

        <action name="manualTrigger!input" class="com.zutubi.pulse.master.xwork.actions.project.ManualTriggerAction" method="doInput">
            <interceptor-ref name="completeSideEffectStack"/>
            <result name="input" type="velocity">/manual-trigger.vm</result>
            <result name="success" type="redirect">/browse/projects/${u_projectName}/</result>
        </action>

        <action name="manualTrigger" class="com.zutubi.pulse.master.xwork.actions.project.ManualTriggerAction">
            <interceptor-ref name="completeSideEffectStack"/>
            <result name="input" type="velocity">/manual-trigger.vm</result>
            <result name="success" type="redirect">/browse/projects/${u_projectName}/</result>
            <result name="cancel" type="redirect">/browse/projects/${u_projectName}/</result>
        </action>

        <action name="viewArtifact" class="com.zutubi.pulse.master.xwork.actions.project.ViewDecoratedArtifactAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/view-artifact.vm</result>
        </action>

        <action name="downloadArtifact" class="com.zutubi.pulse.master.xwork.actions.project.DownloadArtifactAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="redirect">${url}</result>
        </action>

        <action name="zip" class="com.zutubi.pulse.master.xwork.actions.vfs.ZipAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="contentDisposition">filename="${filename}"</param>
            </result>
        </action>

        <action name="downloadSCMFile" class="com.zutubi.pulse.master.xwork.actions.project.DownloadSCMFileAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="contentDisposition">filename="${filename}"</param>
            </result>
        </action>

        <action name="projectHome" class="com.zutubi.pulse.master.xwork.actions.project.ProjectHomeAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/project-home.vm</result>
            <result name="error" type="redirect">/browse/</result>
        </action>

        <action name="projectReports" class="com.zutubi.pulse.master.xwork.actions.project.ProjectReportsAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/project-reports.vm</result>
            <result name="error" type="redirect">/browse/</result>
        </action>

        <action name="projectDependencies" class="com.zutubi.pulse.master.xwork.actions.project.ProjectDependenciesAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/project-dependencies.vm</result>
            <result name="error" type="redirect">/browse/</result>
        </action>

        <action name="projectState" class="com.zutubi.pulse.master.xwork.actions.project.ProjectStateAction">
            <result name="success" type="redirect">/browse/projects/${u_projectName}/</result>
        </action>

        <action name="projectHistory" class="com.zutubi.pulse.master.xwork.actions.project.ProjectHistoryAction">
            <interceptor-ref name="completeReadOnlyStack"/>
            <result name="success" type="velocity">/project-history.vm</result>
        </action>

        <action name="viewTriggers" class="com.zutubi.pulse.master.xwork.actions.scheduling.ViewTriggersAction">
            <result name="success" type="velocity">/view-triggers.vm</result>
        </action>

        <action name="garbageCollect" class="com.zutubi.pulse.master.xwork.actions.console.GarbageCollectAction">
            <result name="success" type="redirect">/viewSystemInfo.action</result>
        </action>

        <action name="rss" class="com.zutubi.pulse.master.xwork.actions.rss.BuildResultsRssAction">
            <interceptor-ref name="completeReadOnlyStack"/>
        </action>
    </package>

    <package name="dashboard" namespace="/dashboard" extends="webwork-default-package">
        <default-interceptor-ref name="completeReadOnlyStack"/>

        <action name="home" class="com.zutubi.pulse.master.xwork.actions.user.DashboardAction">
            <interceptor-ref name="ajaxReadOnlyStack"/>
              <result name="success" type="velocity">/dashboard.vm</result>
            <result name="guest" type="redirect">/browse.action</result>
        </action>

        <action name="my" class="com.zutubi.pulse.master.xwork.actions.user.MyBuildsAction">
            <interceptor-ref name="ajaxReadOnlyStack"/>
            <result name="success" type="velocity">/my-builds.vm</result>
            <result name="guest" type="redirect">/browse.action</result>
        </action>

        <action name="preferences" class="com.zutubi.pulse.master.xwork.actions.user.PreferencesAction">
            <interceptor-ref name="ajaxReadOnlyStack"/>
            <result name="success" type="velocity">/preferences.vm</result>
            <result name="guest" type="redirect">/browse.action</result>
        </action>
    </package>

    <package name="personal" namespace="/personal" extends="webwork-default-package">
        <default-interceptor-ref name="completeStack"/>

        <action name="personalBuild" class="com.zutubi.pulse.master.xwork.actions.PersonalBuildAction">
            <result name="error" type="velocity">response.vm</result>
            <result name="success" type="velocity">response.vm</result>
        </action>
    </package>

    <package name="user" namespace="/user" extends="webwork-default-package">
        <default-interceptor-ref name="completeSideEffectStack"/>

        <action name="hideDashboardProject" class="com.zutubi.pulse.master.xwork.actions.user.HideDashboardProjectAction">
            <result name="success" type="redirect">/dashboard/home/</result>
        </action>

        <action name="hideDashboardGroup" class="com.zutubi.pulse.master.xwork.actions.user.HideDashboardGroupAction">
            <result name="success" type="redirect">/dashboard/home/</result>
        </action>
    </package>

    <package name="setup" namespace="/setup" extends="webwork-default-package">
        <!--
        a simple redirect to ensure that if the startup requests '/setup/app.action'
        from this xwork config, it handles it gracefully.
         -->
        <action name="app" class="com.zutubi.pulse.master.xwork.actions.ActionSupport">
            <result name="success" type="redirect">/</result>
        </action>
    </package>

    <package name="admin" namespace="/admin" extends="webwork-default-package">
        <default-interceptor-ref name="defaultReadOnlyStack"/>

        <action name="app" class="com.zutubi.pulse.master.xwork.actions.admin.AdminAppAction">
            <result name="success" type="velocity">app.vm</result>
        </action>
    </package>

    <package name="ajax" namespace="/ajax" extends="webwork-default-package">
        <default-interceptor-ref name="ajaxReadOnlyStack"/>

        <global-results>
            <result name="error" type="velocity">/ajax/generic-error-panel.vm</result>
        </global-results>

        <action name="historyData" class="com.zutubi.pulse.master.xwork.actions.ajax.HistoryDataAction">
            <result name="success" type="flexjson">model</result>
        </action>

        <action name="myBuildsData" class="com.zutubi.pulse.master.xwork.actions.user.MyBuildsDataAction">
            <result name="success" type="flexjson">builds</result>
        </action>

        <action name="browseData" class="com.zutubi.pulse.master.xwork.actions.project.BrowseDataAction">
            <result name="success" type="flexjson">model</result>
        </action>

        <action name="dashboardData" class="com.zutubi.pulse.master.xwork.actions.user.DashboardDataAction">
            <result name="success" type="flexjson">model</result>
        </action>

        <action name="saveProjectsFilter" class="com.zutubi.pulse.master.xwork.actions.project.SaveProjectsFilterAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="httpheader">200</result>
        </action>

        <action name="saveProjectsLayout" class="com.zutubi.pulse.master.xwork.actions.project.SaveProjectsLayoutAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="httpheader">200</result>
        </action>

        <action name="projectHomeData" class="com.zutubi.pulse.master.xwork.actions.project.ProjectHomeDataAction">
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">model</param>
            </result>
        </action>

        <action name="projectReportsData" class="com.zutubi.pulse.master.xwork.actions.project.ProjectReportsDataAction">
            <result name="success" type="flexjson">model</result>
        </action>

        <action name="projectDependenciesData" class="com.zutubi.pulse.master.xwork.actions.project.ProjectDependenciesDataAction">
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">model</param>
            </result>
        </action>

        <action name="buildSummaryData" class="com.zutubi.pulse.master.xwork.actions.project.BuildSummaryDataAction">
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">model</param>
            </result>
            <result name="error" type="httpheader">500</result>
        </action>

        <action name="buildDetailsPanel" class="com.zutubi.pulse.master.xwork.actions.project.ViewBuildDetailsAction">
            <result name="success" type="velocity">build-details-panel.vm</result>
        </action>
        
        <action name="tailBuildLogPanel" class="com.zutubi.pulse.master.xwork.actions.project.TailBuildLogAction">
            <result name="tail" type="velocity">tail-log-panel.vm</result>
        </action>

        <action name="viewTestsPanel" class="com.zutubi.pulse.master.xwork.actions.project.BuildStatusActionBase">
            <result name="success" type="velocity">view-tests-panel.vm</result>
        </action>

        <action name="tailProjectLogPanel" class="com.zutubi.pulse.master.xwork.actions.project.TailProjectLogAction">
            <result name="tail" type="velocity">tail-log-panel.vm</result>
        </action>

        <action name="changelistData" class="com.zutubi.pulse.master.xwork.actions.project.ChangelistDataAction">
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">model</param>
            </result>
            <result name="error" type="httpheader">500</result>
        </action>

        <action name="agentsData" class="com.zutubi.pulse.master.xwork.actions.agents.AgentsDataAction">
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">model</param>
            </result>
            <result name="error" type="httpheader">500</result>
        </action>

        <action name="agentStatusData" class="com.zutubi.pulse.master.xwork.actions.agents.AgentStatusDataAction">
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">model</param>
            </result>
            <result name="error" type="httpheader">500</result>
        </action>

        <action name="agentStatisticsData" class="com.zutubi.pulse.master.xwork.actions.agents.AgentStatisticsDataAction">
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">model</param>
            </result>
            <result name="error" type="httpheader">500</result>
        </action>

        <action name="serverActivityData" class="com.zutubi.pulse.master.xwork.actions.server.ServerActivityDataAction">
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">model</param>
            </result>
            <result name="error" type="httpheader">500</result>
        </action>

        <action name="serverInfoData" class="com.zutubi.pulse.master.xwork.actions.agents.ServerInfoDataAction">
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">info</param>
            </result>
            <result name="error" type="httpheader">500</result>
        </action>

        <action name="serverMessagesData" class="com.zutubi.pulse.master.xwork.actions.agents.ServerMessagesDataAction">
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">model</param>
            </result>
            <result name="error" type="httpheader">500</result>
        </action>

        <action name="deleteBuild" class="com.zutubi.pulse.master.xwork.actions.project.DeleteBuildAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="httpheader">200</result>
        </action>

        <action name="toggleQueue" class="com.zutubi.pulse.master.xwork.actions.server.ToggleQueueAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
            <result name="error" type="httpheader">500</result>
        </action>

        <action name="cancelQueuedBuild" class="com.zutubi.pulse.master.xwork.actions.server.CancelQueuedBuildAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
            <result name="error" type="httpheader">500</result>
        </action>

        <action name="cancelBuild" class="com.zutubi.pulse.master.xwork.actions.server.CancelBuildAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
            <result name="error" type="httpheader">500</result>
        </action>
        
        <action name="xls" class="com.zutubi.pulse.master.tove.webwork.LsAction">
            <result name="success" type="flexjson">listing</result>
            <result name="error" type="flexjson">
                <param name="deep">true</param>
                <param name="location">result</param>
            </result>
        </action>

        <action name="mkdir" class="com.zutubi.pulse.master.xwork.actions.vfs.MakeDirectoryAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">result</param>
            </result>
            <result name="error" type="flexjson">
                <param name="deep">true</param>
                <param name="location">result</param>
            </result>
        </action>

        <action name="rmdir" class="com.zutubi.pulse.master.xwork.actions.vfs.RemoveDirectoryAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">
                <param name="deep">true</param>
                <param name="location">result</param>
            </result>
            <result name="error" type="flexjson">
                <param name="deep">true</param>
                <param name="location">result</param>
            </result>
        </action>

        <action name="customiseBuildColumns" class="com.zutubi.pulse.master.xwork.actions.user.CustomiseBuildColumnsAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="httpheader">200</result>
        </action>

        <action name="customiseHistoryBuilds" class="com.zutubi.pulse.master.xwork.actions.user.CustomiseHistoryBuildsAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="httpheader">200</result>
        </action>

        <action name="setDependenciesTransitiveMode" class="com.zutubi.pulse.master.xwork.actions.user.SetDependenciesTransitiveModeAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="setTestFilter" class="com.zutubi.pulse.master.xwork.actions.ajax.SetTestFilterAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="httpheader">200</result>
        </action>

        <action name="getLatestRevision" class="com.zutubi.pulse.master.xwork.actions.ajax.GetLatestRevisionAction">
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="manualTrigger" class="com.zutubi.pulse.master.xwork.actions.project.ManualTriggerAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <param name="ajax">true</param>
            <result name="input" type="flexjson">result</result>
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="triggerBuildHook" class="com.zutubi.pulse.master.xwork.actions.ajax.TriggerBuildHookAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="togglePin" class="com.zutubi.pulse.master.xwork.actions.ajax.TogglePinAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="reference" class="com.zutubi.pulse.master.tove.webwork.help.ReferenceAction">
            <result name="builtin" type="velocity">reference/builtins/${baseName}.vm</result>
            <result name="element" type="velocity">reference/element.vm</result>
            <result name="extensible" type="velocity">reference/extensible.vm</result>
            <result name="filetype" type="velocity">reference/filetypes/${baseName}.vm</result>
            <result name="root" type="velocity">reference/index.vm</result>
            <result name="static" type="velocity">reference/static/${staticPath}.vm</result>
        </action>

        <action name="takeResponsibility" class="com.zutubi.pulse.master.xwork.actions.ajax.TakeResponsibilityAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="clearResponsibility" class="com.zutubi.pulse.master.xwork.actions.ajax.ClearResponsibilityAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="addComment" class="com.zutubi.pulse.master.xwork.actions.ajax.AddCommentAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="deleteComment" class="com.zutubi.pulse.master.xwork.actions.ajax.DeleteCommentAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="saveTailSettings" class="com.zutubi.pulse.master.xwork.actions.ajax.SaveTailSettingsAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="saveArtifactsFilter" class="com.zutubi.pulse.master.xwork.actions.ajax.SaveArtifactsFilterAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
        </action>

        <action name="getHome" class="com.zutubi.pulse.master.xwork.actions.ajax.GetHomeDirectoryAction">
            <interceptor-ref name="ajaxStack"/>
            <result name="success" type="flexjson">data</result>
        </action>

        <action name="getBuildStatus" class="com.zutubi.pulse.master.xwork.actions.ajax.GetBuildStatusAction">
            <interceptor-ref name="ajaxStack"/>
            <result name="success" type="flexjson">status</result>
        </action>

        <action name="agentAction" class="com.zutubi.pulse.master.xwork.actions.ajax.AgentActionAction">
            <interceptor-ref name="ajaxSideEffectStack"/>
            <result name="success" type="flexjson">result</result>
        </action>
    </package>

    <package name="configAjax" namespace="/ajax/config" extends="default">
        <default-interceptor-ref name="ajaxConfigSideEffectStack"/>

        <global-results>
            <result name="error" type="flexjson">configurationErrors</result>
        </global-results>

        <action name="help" class="com.zutubi.pulse.master.tove.webwork.help.TypeHelpAction">
            <interceptor-ref name="ajaxConfigStack"/>
            <result name="success" type="velocity">help.vm</result>
        </action>

        <action name="save" class="com.zutubi.pulse.master.tove.webwork.SaveAction">
            <result name="composite" type="flexjson">configurationResponse</result>
            <result name="map" type="flexjson">configurationResponse</result>
            <result name="input" type="flexjson">configurationErrors</result>
            <result name="cancel" type="flexjson">configurationResponse</result>
        </action>

        <action name="saveLabel" class="com.zutubi.pulse.master.tove.webwork.SaveLabelAction">
            <result name="composite" type="flexjson">configurationResponse</result>
            <result name="map" type="flexjson">configurationResponse</result>
            <result name="input" type="flexjson">configurationErrors</result>
            <result name="cancel" type="flexjson">configurationResponse</result>
            <result name="rename" type="flexjson">configurationPanel</result>
        </action>

        <action name="ls" class="com.zutubi.pulse.master.tove.webwork.LsAction">
            <interceptor-ref name="ajaxConfigStack"/>
            <param name="basePath">config</param>
            <result name="success" type="flexjson">listing</result>
            <result name="error" type="flexjson">
                <param name="deep">true</param>
                <param name="location">result</param>
            </result>
        </action>

        <action name="generic" class="com.zutubi.pulse.master.tove.webwork.GenericAction">
            <result name="input" type="flexjson">newPanel</result>
            <result name="cancel" type="flexjson">configurationResponse</result>
            <result name="success" type="flexjson">configurationResponse</result>
            <result name="chain" type="chain">
                <param name="namespace">/ajax/action</param>
                <param name="actionName">${customAction}</param>
                <param name="method">input</param>
            </result>
        </action>
        
        <action name="smartclone" class="com.zutubi.pulse.master.tove.webwork.CloneAction">
            <param name="smart">true</param>
            <result name="cancel" type="flexjson">configurationResponse</result>
            <result name="success" type="flexjson">configurationResponse</result>
            <result name="input" type="flexjson">newPanel</result>
        </action>

        <action name="introduceparent" class="com.zutubi.pulse.master.tove.webwork.IntroduceParentAction">
            <result name="cancel" type="flexjson">configurationResponse</result>
            <result name="success" type="flexjson">configurationResponse</result>
            <result name="input" type="flexjson">newPanel</result>
        </action>

        <action name="move" class="com.zutubi.pulse.master.tove.webwork.MoveAction">
            <result name="cancel" type="flexjson">configurationResponse</result>
            <result name="success" type="flexjson">configurationResponse</result>
            <result name="input" type="flexjson">newPanel</result>
        </action>

        <action name="trigger" class="com.zutubi.pulse.master.tove.webwork.TriggerAction">
            <result name="input" type="flexjson">newPanel</result>
            <result name="cancel" type="flexjson">configurationResponse</result>
            <result name="success" type="flexjson">configurationResponse</result>
            <result name="chain" type="chain">
                <param name="namespace">/ajax/action</param>
                <param name="actionName">${customAction}</param>
                <param name="method">input</param>
            </result>
        </action>
    </package>

    <package name="helpAjax" namespace="/ajax/help" extends="configAjax">
        <default-interceptor-ref name="ajaxConfigStack"/>
        
        <action name="type" class="com.zutubi.pulse.master.tove.webwork.help.TypeHelpAction">
            <result name="success" type="velocity">type.vm</result>
        </action>

        <action name="template" class="com.zutubi.pulse.master.tove.webwork.help.TemplateHelpAction">
            <result name="success" type="velocity">template.vm</result>
        </action>

        <action name="wizard" class="com.zutubi.pulse.master.tove.webwork.help.WizardHelpAction">
            <result name="type" type="chain">wizardType</result>
            <result name="select" type="chain">wizardSelect</result>
            <result name="none" type="velocity">none.vm</result>
        </action>

        <action name="wizardType" class="com.zutubi.pulse.master.tove.webwork.help.WizardTypeHelpAction">
            <result name="success" type="velocity">type.vm</result>
        </action>

        <action name="wizardSelect" class="com.zutubi.pulse.master.tove.webwork.help.WizardSelectHelpAction">
            <result name="success" type="velocity">select.vm</result>
        </action>

        <action name="manualTrigger" class="com.zutubi.pulse.master.tove.webwork.help.ManualTriggerHelpAction">
            <result name="success" type="velocity">type.vm</result>
        </action>
    </package>

    <package name="actionAjax" namespace="/ajax/action" extends="configAjax">
        <action name="manualTrigger" class="com.zutubi.pulse.master.xwork.actions.project.ManualTriggerAction">
            <param name="ajax">true</param>
            <result name="input" type="flexjson">newPanel</result>
            <result name="cancel" type="flexjson">configurationResponse</result>
            <result name="success" type="flexjson">configurationResponse</result>
        </action>
    </package>

    <package name="popups" namespace="/popups" extends="webwork-default-package">
        <default-interceptor-ref name="completeReadOnlyStack"/>

        <action name="browseResources" class="com.zutubi.pulse.master.xwork.actions.project.BrowseResourcesAction">
            <result name="success" type="velocity">resource-browser.vm</result>
        </action>

        <action name="reference" class="com.zutubi.pulse.master.xwork.actions.ReferencePopupAction">
            <result name="success" type="velocity">reference.vm</result>
        </action>
    </package>
</xwork>
