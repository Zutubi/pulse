<?xml version="1.0"?>
<project defaultRecipe="maven build">

    <junit.pp name="junit.pp"/>

    <recipe name="maven build">
        <command name="build">
            <!-- pull in the maven resource if configured. -->
            <resource name="maven" required="false"/>
            <maven
#if($workingDir)
                working-dir="${base.dir}/$workingDir"
#end
#if($targets)
                targets="$targets"
#end
#if($arguments)
                args="$arguments"
#end
            />
        #if($workingDir)
            <dir-artifact name="test reports" base="${base.dir}/$workingDir/target/test-reports" fail-if-not-present="false">
        #else
            <dir-artifact name="test reports" base="${base.dir}/target/test-reports" fail-if-not-present="false">
        #end
                <include pattern="**/TEST-*.xml"/>
                <process processor="${junit.pp}"/>
            </dir-artifact>
        </command>
    </recipe>
</project>
