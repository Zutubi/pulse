<!DOCTYPE xwork PUBLIC "-//OpenSymphony Group//XWork 1.0//EN"
        "http://www.opensymphony.com/xwork/xwork-1.1.1.dtd">
<xwork>
    <include file="webwork-default-package.xml"/>

    <package name="default" extends="webwork-default-package">
        <default-interceptor-ref name="completeStack"/>

        <action name="default" class="com.zutubi.pulse.web.ActionSupport">
            <result name="success" type="redirect">/setup/setup!input.action</result>
        </action>

    </package>


    <package name="setup" namespace="/setup" extends="webwork-default-package">
        <default-interceptor-ref name="completeStack"/>

        <action name="setup" class="com.zutubi.pulse.web.setup.ConfigurePulseHomeAction">
            <result name="input" type="velocity">/setup/configure-pulsehome.vm</result>
            <result name="setup" type="redirect">/setup/setupWizard.action</result>
            <result name="upgrade" type="redirect">/upgrade/preview.action</result>
            <result name="success" type="redirect">/</result>
        </action>

        <action name="setupWizard" class="com.zutubi.pulse.web.wizard.WizardAction">
            <interceptor-ref name="wizardStack"/>
            <param name="wizardClass">com.zutubi.pulse.web.setup.SetupWizard</param>
            <result name="admin" type="velocity">/setup/create-admin.vm</result>
            <result name="settings" type="velocity">/setup/server-settings.vm</result>
            <result name="success" type="redirect">/</result>
            <result name="cancel" type="redirect">/default.action</result>
        </action>
    </package>


    <package name="upgrade" namespace="/upgrade" extends="webwork-default-package">
        <default-interceptor-ref name="completeStack"/>

        <action name="preview" class="com.zutubi.pulse.web.upgrade.UpgradePreviewAction">
            <result name="success" type="velocity">preview.vm</result>
        </action>

        <action name="execute" class="com.zutubi.pulse.web.upgrade.UpgradeExecuteAction">
            <interceptor-ref name="executeAndWaitStack"/>
            <result name="wait" type="velocity">status.vm</result>
            <result name="cancel" type="redirect">/setup/setup!input.action</result>
            <result name="success" type="velocity">complete.vm</result>
        </action>

        <action name="continue" class="com.zutubi.pulse.web.upgrade.PostUpgradeAction">
            <result name="success" type="redirect">/</result>
        </action>

    </package>


</xwork>