#helpTag("Build+Artifacts+Tab")
#authorisationTags($principle)
#buildTags($project $result)
<html>
<head>
    <title>#wwtext("name=build") $result.number</title>

    <link rel="stylesheet" type="text/css" href="$base/css/treeview/tree.css"/>
    <script type="text/javascript" src="$base/js/prototype.js"></script>
    <script type="text/javascript" src="$base/js/zutubi.js"></script>
    <script type="text/javascript" src="$base/js/yahoo/yahoo.js"></script>
    <script type="text/javascript" src="$base/js/yahoo/event.js"></script>
    <script type="text/javascript" src="$base/js/yahoo/treeview.js"></script>
    <script type="text/javascript" src="$base/js/widget/treeview.js"></script>
    <script type="text/javascript" src="$base/js/main.js"></script>
    <script type="text/javascript">

        window.onload = initialize;

        function initialize()
        {
            var tree = new ZUTUBI.widget.PulseTreeView('browseTree');
            tree.setSeparator('$separator');
            tree.setFSRoot('pulse:///projects/$project.id/builds/$result.id/artifacts/');
            tree.setBase('$base');

            // load the root nodes for the file system, then draw the tree.
            Element.show($('loading'));
            tree.ls(tree.getRoot(), function()
            {
                Element.hide($('loading'));
                tree.draw();
            }, true, false);
        }

    </script>
</head>
<body>
    #buildTabs($result "artifacts")

    <div style="float:left">
    <h3>#wwtext("name=artifacts.all")</h3>
    <p>
        The tree below allows you to navigate through the artifacts for this build.
    </p>
    <div id="loading" style="display:none;"><img src="$base/images/treeview/loading.gif" alt="loading..."/></div>
    <div id="artifactTree">
        <div id="browseTree"></div>
    </div>
    </div>

    <div style="float:right">
    <p><strong>Legend:</strong>
        <ul class="legend">
            <li class="download">Download an artifact file.</li>
            <li class="archive">Download an archive file containing the nested artifacts.</li>
            <li class="decorate">View a decorated view of the artifact.</li>
        </ul>
    </p>
    </div>



    #tabEnd()
</html>
