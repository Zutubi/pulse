<html>
<head>
    #if(!$monitor.isComplete())
    <meta http-equiv="refresh" content='5;url=#wwurl("includeParams=all")'/>
    #end
</head>

<body>

#if(!$monitor.isComplete())
<h1>Upgrade Progress</h1>
#else
<h1>Upgrade Complete</h1>
#end

<p>
    The upgrade is currently in progress.
</p>

<p>

<table width=500>
    <tr width="40%">
        #if ($monitor.isSuccessful())
            #set($styleClass = "okaybar")
        #elseif($monitor.isError())
            #set($styleClass = "errorbar")
        #else
            #set($styleClass = "clearbar")
        #end
        #if ($monitor.isComplete())
            <td width="100%" class="$styleClass">&nbsp;</td>
        #elseif ($monitor.getPercentageComplete() == 0)
            <td class="clearbar">&nbsp;</td>
        #else
            <td width="$monitor.getPercentageComplete()%" class="$styleClass"/>
            <td class="clearbar">&nbsp;</td>
        #end
    </tr>
</table>

</p>

<p>
    To use this directory we will need to execute the following upgrade tasks.
    <table class="columns" width="40%">
        <tr>
            <td class="columns" width="90%">
                <table id="upgrade.task.details" class="fill-content">
                    #foreach($task in $monitor.taskProgress)
                    #dynamicRow($task.name $task.status)
                    #end
                </table>
            </td>
        </tr>
    </table>
</p>

<p>
    Elapsed time: $monitor.getElaspedTime()
</p>

#if ($monitor.isComplete())
<p>
The upgrade has completed. <a href="/dashboard.action">continue</a>. <a href="preview.action">restart</a>.
</p>
#end

</body>
</html>