<content tag="projectId">$project.id</content>
<content tag="projectName">$!webwork.htmlEncode($project.name)</content>

<html>
<head>
    <title>$!webwork.htmlEncode($project.name)</title>
</head>
<body>
    <h1>:: $!webwork.htmlEncode($project.name) ::</h1>

    #tabBar(["current-build", "history", "configuration"])

    #openTab("current-build")
        #if($currentBuild)
        <table>
            <tr><td>
            <table class="content">
                #headingRow("build.summary" 7)
                <tr>
                    #contentHeading("build.id" 1)
                    #contentHeading("build.status" 2)
                    #contentHeading("build.when" 1)
                    #contentHeading("build.elapsed" 1)
                    #contentHeading("actions" 2)
                </tr>
                <tr>
                    #set($cssClass = $currentBuild.state.string)
                    #contentCell($currentBuild.number)
                    #statusCell($currentBuild)
                    #classCell($currentBuild.stamps.prettyStartTime)
                    #classCell($currentBuild.stamps.prettyElapsed)
                    #viewCell($project $currentBuild)
                    #changesCell($project $currentBuild)
                </tr>
            </table>
            </tr></td>
            <tr><td>
            <table class="content" width="100%">
                #headingRow("build.features" 1)
               <tr>
                   <td class="content">
                       #buildMessageSummary($currentBuild $currentBuild.getLevel("ERROR"))
                       #buildMessageSummary($currentBuild $currentBuild.getLevel("WARNING"))
                   </td>
               </tr>
            </table>
            </tr></td>
            </table>
#*
            <h4>recipes</h4>
            #showrecipes($currentBuild.root false $project.id)
*#
        #else
            #wwtext("name=never.built")
        #end
    #closeTab()

    #openTab("history")
        #if($history.size() > 0)
        <table class="content">
            <tr>
                <th class="heading" colspan="6">
                    <span class="action"><a href="searchBuilds.action?projectId=$project.id"><img alt="search" src="images/zoom.png"/>#wwtext("name=search.builds")</a></span>#wwtext("name=recent.builds")
                </th>
            </tr>
            <tr>
                #contentHeading("build.id" 1)
                #contentHeading("build.status" 2)
                #contentHeading("build.when" 1)
                #contentHeading("build.elapsed" 1)
                #contentHeading("actions" 2)
            </tr>
            #foreach($buildResult in $history)
                #set($cssClass = $buildResult.state.string)
            <tr>
                <td class="content"><a href="viewBuild.action?id=$project.id&amp;buildId=$buildResult.id">$buildResult.number</a></td>
                #statusCell($buildResult)
                #classCell($buildResult.stamps.prettyStartTime)
                #classCell($buildResult.stamps.prettyElapsed)
                #viewCell($project $buildResult)
                #changesCell($project $buildResult)
            </tr>
            #end
        </table>
        #else
            #wwtext("name=no.history")
        #end
    #closeTab()

    #openTab("configuration")
        configuration content
    #closeTab()

    #selectTab("current-build")

#*
      <div id="project-left-column">

        <h2 class="command-info">details</h2>
        <div class="command-content">
            <table>
                #detailrow("name" $project.name)
                #detailrow("description" $project.description)
                #detailrow("action" "<a href='editProject!default.action?id=$project.id'>edit</a>")
                #scmdetailrow("scm" $project $project.scm)
                #detailrow("type" "<a href='editBobFileDetails!default.action?id=$project.bobFileDetails.id&projectId=$project.id'>$project.bobFileDetails.type</a>")
            </table>
        </div>

        <h2 class="command-info">build specifications</h2>
        <div class="command-content">
            <table>
                <tr>
                    <th class="command-detail">name</th>
                    <th colspan="3" class="command-detail">actions</th>
                </tr>
            #foreach ($buildSpec in $project.buildSpecifications)
                <tr>
                    <td class="command-detail"><a href="viewBuildSpecification.action?projectId=$project.id&id=$buildSpec.id">$buildSpec.name</a></td>
                    <td class="command-detail"><a href="triggerBuild.action?id=$buildSpec.id&projectId=$project.id">trigger</a></td>
                    <td class="command-detail"><a href="viewBuildSpecification.action?projectId=$project.id&id=$buildSpec.id">edit</a></td>
                    <td class="command-detail"><a href="deleteBuildSpecification.action?projectId=$project.id&id=$buildSpec.id">delete</a></td>
                </tr>
            #end
                <tr>
                    <td colspan="4" class="command-detail"><b>+</b> <a href="createBuildSpecification!default.action?projectId=$project.id">add new build specification</a></td>
                </tr>
            </table>
        </div>


        <h2 class="command-info">triggers</h2>
        <div class="command-content">
            <table>
                <tr>
                    <th class="command-detail">name</th>
                    <th class="command-detail">build&nbsp;spec</th>
                    <th colspan="2" class="command-detail">actions</th>
                </tr>
            #foreach ($trigger in $triggers)
                <tr>
                    <td class="command-detail">$trigger.name ($trigger.type)</td>
                    <td class="command-detail">$trigger.dataMap.spec</td>
                    <td class="command-detail"><a href="deleteTrigger.action?id=$trigger.id">delete</a></td>
                </tr>
            #end
                <tr>
                    <td colspan="4" class="command-detail"><b>+</b> <a href="addTrigger.action?project=$project.id">add new trigger</a></td>
                </tr>
            </table>
        </div>

        </div>

        <div id="project-content">
            <h4>cleanup policy</h4>
            <table>
                #detailrow("working directories deleted" $project.cleanupPolicy.prettyWorkDirDays)
                #detailrow("build results deleted" $project.cleanupPolicy.prettyResultDays)
                #detailrow("action" "<a href='editCleanupPolicy!default.action?projectId=$project.id'>edit</a>")
            </table>
        </div>

        </div>
*#
    </body>
</html>