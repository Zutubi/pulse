<table>
    <tr>

<!-- ********** Left column ********** -->

        <td class="columns" width="100%">

            <h2 class="section top">#wwtext("name=current.build")</h2>

        #if($currentBuild)
            #showBuild($currentBuild true false)
            #buildTableColumns($summaryColumns "project.summary")            
        #else
            <p>
                #wwtext("name=never.built")
            </p>
        #end

        #if($recentBuilds.size() > 0)
            <h2 class="section">#wwtext("name=recent.builds")</h2>
            #projectRecentBuilds("recent.builds" "recent.builds" $recentBuilds $rssEnabled $project)
        #end

            <h2 class="section">#wwtext("name=latest.changes")</h2>

            <table class="content">
                #headingRow("latest.changes" 5)
                <tr>
                    #contentHeading("change.revision" 1)
                    #contentHeading("change.who" 1)
                    #contentHeading("change.when" 1)
                    #contentHeading("change.comment" 1)
                    #contentHeading("actions" 1)
                </tr>
        #if($latestChanges.size() > 0)
            #foreach($changelist in $latestChanges)
                #set($index = $velocityCount - 1)
                $action.updateChangeUrl($project, $changelist.revision)
                <tr>
                    #dynamicRightLinkCell($changelist.revision $action.getChangeUrl())
                    #dynamicCell($changelist.user)
                    #dateCell($changelist)
                    #commitCommentCell($changelist "project")
                    #linkCell("view.$changelist.id" "view" "viewChangelist.action?id=$changelist.id&amp;projectId=$project.id")
                </tr>
            #end
        #else
                <tr>
                    <td class="content" colspan="8">#wwtext("name=no.changes")</td>
                <tr>
        #end
            </table>

        </td>

<!-- ********** Right column ********** -->

        <td class="columns" width="400px" style="padding-left: 20px;">

            <table class="fill-content">
                #headingRow("project.status" 2)
                <tr>
                    <th class="content-row">
                        #wwtext("name=state")
                    </th>
                    <td #if($project.isPaused()) class="note" #else class="content" #end>
                        $project.state.toString().toLowerCase()&nbsp;
#acl("domainObject=project" "hasPermission=4,1")
            #if($project.isPaused())
                        <a class="unadorned" href="projectState.action?id=$project.id&amp;pause=false">
                            <img style="vertical-align: top" src="$base/images/control_play_blue.gif"/>
                            #wwtext("name=resume")
                        </a>
            #else
                        <a class="unadorned" href="projectState.action?id=$project.id&amp;pause=true">
                            <img src="$base/images/control_pause_blue.gif"/>
                            #wwtext("name=pause")
                        </a>
            #end
#end
                    </td>
                </tr>
                <tr>
                    <th class="content-row">
                        #wwtext("name=project.success.rate")
                    </th>
                    <td class="content">
                        ${percentSuccessNoErrors}% (#wwtext("name=errors.excluded"))
                    </td>
                </tr>
                <tr>
                    <th class="content-row">
                        #wwtext("name=project.statistics")
                    </th>
                    <td class="content">
                        <img class="centre" title="$successfulBuilds (${percentSuccessful}%) successful" src="$base/images/box-success.gif" height="10" width="$percentSuccessful"/><img class="centre" title="$failedBuilds (${percentFailed}%) failed" src="$base/images/box-failure.gif" height="10" width="$percentFailed"/><img class="centre" title="$errorBuilds (${percentError}%) errors" src="$base/images/box-error.gif" height="10" width="$percentError"/>
                        <br/>$totalBuilds builds (s: $successfulBuilds, f: $failedBuilds, e: $errorBuilds)
                    </td>
                </tr>
            </table>

<!-- FIXME: replace this with links to the projects configuration for those that are authorised...
    can also include links to the actions available for the projectConfig so that admins can interact with the
    project outside the config pages.

            <table class="fill-content">
                #headingRow("project.basics" 2)
                #dynamicRow("project.name" $project.name)
            #if($project.description && $project.description.length() > 0)
                <tr>
                    #contentRowHeading("project.description")
                    #wrapCell($project.description)
                </tr>
            #end
            #if($project.url && $project.url.length() > 0)
                #dynamicLinkRow("project.url" "homepage" $project.url)
            #end
#authorize("ifAllGranted=ROLE_ADMINISTRATOR")
                <tr>
                    <th class="content-row" rowspan="2">#wwtext("name=actions")</th>
                    <td class="content">
                        <img src="$base/images/page_copy.gif"/> #wwtext("name=project.clone")
                    </td>
                </tr>
                <tr>
                    <td class="content">
            #if($projectNotBuilding)
                        <a href="deleteProject!input.action?id=$project.id">
                            <img src="$base/images/delete.gif"/> #wwtext("name=delete.project")
                        </a>
            #else
                        #wwtext("name=project.actions.building")
            #end
#end
                    </td>
                </tr>
            </table>
-->
        </td>
    </tr>
</table>
