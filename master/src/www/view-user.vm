<html>
    <head>
<!-- custom macro. //-->
#macro(detailrow $header $content)
  <tr><th class="command-detail">$header</th><td class="command-detail">$content</td></tr>
#end
        <title>[CiB] $user.name</title>
        <link href="build.css" rel="stylesheet" type="text/css">
        <content tag="action">user.view</content>
    </head>
    <body>    
        <h1 class="build-log">:: $user.name ::</h1>
        
        <h2 class="command-info">basics (<a href="editUser!default.action?id=$user.id">edit</a>)</h2>
        <div class="command-content">
            <table>
                #detailrow("login" $user.login)
                #detailrow("full name" $user.name)
            </table>
        </div>
        
        <h2 class="command-info">contact points ($user.contactPoints.size()) </h2>
        <div class="command-content">
            <table>
                <tr>
                    <th class="command-detail">name</th>
                    <th class="command-detail">uid</th>
                    <th class="command-detail" colspan="2">actions</th>
                </tr>
            #foreach ($contact in $user.contactPoints)
                <tr>
                    <td class="command-detail">$contact.name</td>
                    <td class="command-detail">#contactPointIcon($contact) $contact.uid</td>
                    <td class="command-detail">
                        <a href="editContactPoint!default.action?id=$contact.id&user=$user.id">edit</a>
                    </td>
                    <td class="command-detail">
                        <a href="deleteContactPoint.action?id=$contact.id&user=$user.id">delete</a>
                    </td>
                </tr>
            #end
                <tr>
                    <td class="command-detail" colspan="4"><b>+</b> <a href="createContactPoint!default.action?user=$user.id">add new contact point</a></td>
                </tr>
            </table>
        </div>

        <h2 class="command-info">subscriptions ($user.subscriptions.size())</h2>
        <div class="command-content">
            <table>
                <tr>
                    <th class="command-detail">project</th>
                    <th class="command-detail">contactpoint</th>
                    <th class="command-detail" colspan="2">actions</th>
                </tr>
            #foreach ($subscription in $user.subscriptions)
                #set($contact = $subscription.contactPoint)
                #set($project = $subscription.project)
                <tr>
                    <td class="command-detail">$project.name</td>
                    <td class="command-detail">#contactPointIcon($contact) $contact.uid</td>
                    <td class="command-detail">
                        <a href="editSubscription!default.action?id=$subscription.id&login=$user.login">edit</a>
                    </td>
                    <td class="command-detail">
                        <a href="deleteSubscription.action?id=$subscription.id&login=$user.login">delete</a>
                    </td>
                </tr>
            #end
                <tr>
                    <td class="command-detail" colspan="4"><b>+</b> <a href="createSubscription!default.action?user=$user.login">add new subscription</a></td>
                </tr>
            </table>
        </div>

    </body>
</html>