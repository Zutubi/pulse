<html>
  <head>
    <title>projects</title>
    <link href="build.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1 class="build-log">:: projects ::</h1>
    <h2 class="command-info">projects</h2>
    <div class="command-content">
    <table>
      <tr>
        <th class="command-detail">project</th>
        <th class="command-detail">last built</th>
        <th class="command-detail">build id</th>
        <th class="command-detail">elapsed</th>
        <th class="command-detail">status</th>
      </tr>
#foreach($project in $projects)
  #set($index = $velocityCount - 1)
  #set($lastResult = $latestBuilds.get($index))
#if($latestBuilds.get($index))
  #set($built = $lastResult.stamps.prettyStartTime) 
  #set($id = $lastResult.number)
  #set($elapsed = $lastResult.stamps.prettyElapsed)
  #set($status = $lastResult.state.prettyString)
  #classset($lastResult)
#else
  #set($built = "never")
  #set($id = "n/a")
  #set($elapsed = "n/a")
  #set($success = "n/a")  
  #set($status = "n/a")
  #set($class = "detail")
#end
      <tr>
        <td class="build-$class"><a href="manageProject.action?id=$project.id">$project.name</a></td>
        <td class="build-$class">$built</td>
        <td class="build-$class">$id</td>
        <td class="build-$class">$elapsed</td>
        <td class="build-$class">$status</td>
      </tr>
#end
      <tr>
        <td class="command-detail" colspan="5"><b>+</b> <a href="addProject.action">add new project</a></td>
      </tr>
    </table>
    </div>
  </body>
</html>
