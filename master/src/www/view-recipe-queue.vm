#authorisationTags($principle)
<content tag="selectedTab">server</content>
<html>
<head>
    <title>#wwtext("name=server")</title>
</head>
<body>
    <h1>:: #wwtext("name=server") ::</h1>

    #serverTabs("status")

    <table class="columns">
    <tr><td>

    <table class="fill-content">
        #headingRow("build.queue" 3)
        <tr>
            #contentHeading("project" 1)
            #contentHeading("build.spec" 1)
            #contentHeading("queue.when" 1)
        </tr>
#if($action.hasQueuedRequests())
    #foreach($project in $projectQueue.keySet())
        #if($action.hasQueuedRequests($project))
            #foreach($requestEvent in $action.getQueuedRequests($project))
        <tr>
            #dynamicCell($project.name)
            #dynamicCell($requestEvent.specification)
            #contentCell($requestEvent.prettyQueueTime)
        </tr>
            #end
        #end
    #end
#else
    <tr>
        <td class="content" colspan="3">#wwtext("name=build.queue.empty")</td>
    </tr>
#end
    </table>

    </td></tr><tr><td>

    <table class="fill-content">
        #headingRow("active.builds" 3)
        <tr>
            #contentHeading("project" 1)
            #contentHeading("build.spec" 1)
            #contentHeading("queue.when" 1)
        </tr>
#if($action.hasActiveBuilds())
    #foreach($project in $projectQueue.keySet())
        #if($action.hasActiveBuild($project))
            #set($requestEvent = $projectQueue.get($project).get(0))
        <tr>
            #dynamicLinkCell($project.name "currentBuild.action?id=$project.id")
            #dynamicCell($requestEvent.specification)
            #contentCell($requestEvent.prettyQueueTime)
        </tr>
        #end
    #end
#else
    <tr>
        <td class="content" colspan="3">#wwtext("name=no.active.builds")</td>
    </tr>
#end
    </table>

    </td></tr><tr><td>

    <table class="fill-content">
        #headingRow("recipe.queue" 4)
        <tr>
            #contentHeading("project" 1)
            #contentHeading("build.id" 1)
            #contentHeading("build.spec" 1)
            #contentHeading("queue.when" 1)
        </tr>
#if($recipeQueueSnapshot.size() > 0)
    #foreach($dispatchRequest in $recipeQueueSnapshot)
        #set($build = $dispatchRequest.build)
        #set($project = $build.project)
        <tr>
            #dynamicLinkCell($project.name "currentBuild.action?id=$project.id")
            #contentCell($build.number)
            #dynamicCell($build.buildSpecification)
            #contentCell($dispatchRequest.prettyQueueTime)
        </tr>
    #end
#else
    <tr>
        <td class="content" colspan="4">#wwtext("name=recipe.queue.empty")</td>
    </tr>
#end
    </table>

    </td></tr>
    </table>

</html>
