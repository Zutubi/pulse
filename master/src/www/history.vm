#authorisationTags($principle)
#projectTags($project)
<html>
<head>
    <title>$!webwork.htmlEncode($project.name)</title>
</head>
<body>
    <h1>:: $!webwork.htmlEncode($project.name) ::</h1>

    #projectTabs("history")

    <table>
        <tr>
            <td>

    #wwcform("action=history.action" "heading=%{getText('quick.filters')}" "colspan=5" "width=100%" "method=get")
        #wwhidden("name=id")

        <tr>
        #wwselect("name=stateFilter" "singleRow=true" "label=%{getText('filter.state')}" "list=stateFilters" "onchange=submit()" "tabindex=1")
        #wwselect("name=spec" "singleRow=true" "label=%{getText('filter.spec')}" "list=specs" "onchange=submit()" "tabindex=2")
        <td><a href="history.action?id=$project.id">#wwtext("name=filter.clear")</a></td>
        </tr>
    #end
            </td>
        </tr>
        <tr>
            <td>

    <table width="100%" class="content">
        #actionHeadingRow("recent.builds" 11 "search.builds" "searchBuilds.action?projectId=$project.id" "zoom.gif" "recent.builds.search")
        <tr>
            #contentHeading("build.id" 1)
            #contentHeading("build.status" 2)
            #contentHeading("build.spec" 1)
            #contentHeading("build.when" 1)
            #contentHeading("build.elapsed" 1)
            #contentHeading("actions" 5)
        </tr>
#if($history.size() > 0)
    #foreach($buildResult in $history)
            #set($cssClass = $buildResult.state.string)
        <tr>
            <td class="content"><a href="viewBuild.action?id=$buildResult.id">$buildResult.number</a></td>
            #statusCell($buildResult)
            #classCell($buildResult.buildSpecification)
            #classCell($buildResult.stamps.prettyStartTime)
            #classCell($buildResult.stamps.prettyElapsed)
            #viewCell($project $buildResult)
            #logCell($project $buildResult)
            #changesCell($project $buildResult)
            #artifactsCell($project $buildResult)
            #workingCopyCell($project $buildResult)
        </tr>
    #end
    </table>

            </td>
        </tr>
        <tr>
            <td>

            <table width="100%" class="content">
    #if($pageCount > 1)
        #set($getParams = "id=$project.id&amp;stateFilter=$stateFilter&amp;spec=$spec")
        #set($nextPage = $startPage + 1)
        #set($previousPage = $startPage - 1)
        #set($lastPage = $pageCount - 1)
                <tr>
                    <td class="content-centre">
        #if($startPage > 0)
                        <a href="history.action?$getParams" class="unadorned">
        #end
                            #image("images/resultset_first.gif" "page.latest") #wwtext("name=page.latest")
        #if($startPage > 0)
                        </a>
        #end
                    </td>
                    <td class="content-centre">
        #if($startPage > 0)
                        <a href="history.action?$getParams&amp;startPage=$previousPage" class="unadorned">
        #end
                            #image("images/resultset_previous.gif" "page.newer") #wwtext("name=page.newer")
        #if($startPage > 0)
                        </a>
        #end
                    </td>
                    <td class="content-centre">
        #foreach($pageIndex in [$pageRangeStart..$pageRangeEnd])
            #set($pageNumber = $pageIndex + 1)
                        &nbsp;
            #if($pageIndex != $startPage)
                        <a href="history.action?$getParams&amp;startPage=$pageIndex">
            #end
                            $pageNumber#if($pageIndex != $startPage)</a>#end
        #end
                        &nbsp;
                    </td>
                    <td class="content-centre">
        #if($startPage < $lastPage)
                        <a href="history.action?$getParams&amp;startPage=$nextPage" class="unadorned">
        #end
                            #wwtext("name=page.older") #image("images/resultset_next.gif" "page.older")
        #if($startPage < $lastPage)
                        </a>
        #end
                    </td>
                    <td class="content-centre">
        #if($startPage < $lastPage)
                        <a href="history.action?$getParams&amp;startPage=$lastPage" class="unadorned">
        #end
                            #wwtext("name=page.oldest") #image("images/resultset_last.gif" "page.oldeset")
        #if($startPage < $lastPage)
                        </a>
        #end
                    </td>
                </tr>
                <tr><th colspan="5">$action.getText("history.count", ["$historyCount"])</td></tr>
    #end
            </table>

            </td>
        </tr>
#else
        <tr>
            <td class="content" colspan="11">
                #wwtext("name=no.history")
            </td>
        </tr>
#end
    </table>
</html>
