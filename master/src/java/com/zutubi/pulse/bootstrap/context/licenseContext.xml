<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

    <bean id="licenseManager" class="com.zutubi.pulse.license.LicenseManager" autowire="byName" init-method="init">
        <property name="licenseKeyStore">
            <ref bean="licenseKeyStore"/>
        </property>
        <property name="authorisations">
            <list>
                <ref local="canRunPulseAuthorisation"/>
            </list>
        </property>
    </bean>

    <!-- the current key store is the Data object. -->
    <bean id="licenseKeyStore" class="com.zutubi.pulse.license.DataLicenseKeyStore">
        <property name="dataResolver">
            <ref bean="configurationManager"/>
        </property>
    </bean>

    <bean id="canRunPulseAuthorisation" class="com.zutubi.pulse.license.authorisation.CanRunPulseAuthorisation" autowire="byName"/>

</beans>