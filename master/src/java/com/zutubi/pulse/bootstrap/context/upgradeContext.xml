<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<!--

-->
<beans>

    <!-- WARNING: as of 05/05/06, the context is empty when this file is being loaded.
        In particular, NO DATASOURCE!. You have been warned.
    -->

    <bean id="upgradeManager" class="com.zutubi.pulse.upgrade.DefaultUpgradeManager" autowire="byName">
        <property name="upgradeableComponents">
            <list>
                <ref local="schemaUpgradeableComponent"/>
            </list>
        </property>
        <property name="upgradeableComponentSources">
            <list>
                <ref bean="pluginManager"/>
            </list>
        </property>
    </bean>

    <bean id="schemaUpgradeableComponent" class="com.zutubi.pulse.upgrade.tasks.PulseUpgradeableComponent" autowire="byName">
<!--
        <property name="tasks">
            <list>
            </list>
        </property>
-->
        <property name="systemTasks">
            <list>
                <ref local="backup"/>
            </list>
        </property>
    </bean>

    <bean id="backup" class="com.zutubi.pulse.upgrade.tasks.BackupUpgradeTask" autowire="byName"/>

</beans>
