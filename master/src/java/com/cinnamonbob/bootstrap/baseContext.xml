<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<!--
This spring context file defines the base system context. This context is the first context loaded
after the bootstrap context, and should contain entities that can be shared by the entire system.

The Jetty server is here because it is required to provide a Web UI for interacting with the user.
-->
<beans>

    <bean id="eventManager" class="com.cinnamonbob.events.DefaultEventManager">
        <constructor-arg index="0" ref="eventDispatcher"/>
    </bean>

    <bean id="eventDispatcher" class="com.cinnamonbob.events.SynchronousDispatcher"/>

    <bean id="jettyServer" class="com.cinnamonbob.jetty.JettyServerFactoryBean" destroy-method="shutdown">
        <property name="configurationManager">
            <ref bean="configurationManager"/>
        </property>
    </bean>

    <bean id="jettyManager" class="com.cinnamonbob.jetty.JettyManager">
        <property name="jettyServer">
            <ref bean="jettyServer"/>
        </property>
        <property name="eventManager">
            <ref bean="eventManager"/>
        </property>
        <property name="configurationManager">
            <ref bean="configurationManager"/>
        </property>
    </bean>

</beans>
